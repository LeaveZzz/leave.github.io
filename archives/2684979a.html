<!-- build time:Mon Aug 02 2021 20:05:04 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Vue源码学习笔记(一) | LeaveH</title><meta name="description" content="mustache模板引擎。"><meta name="keywords" content="前端,Vue"><meta name="author" content="LeaveHao"><meta name="copyright" content="LeaveHao"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="canonical" href="http://blog.leospace.cn/archives/2684979a.html"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"><link rel="preconnect" href="//busuanzi.ibruce.info"><meta property="og:type" content="article"><meta property="og:title" content="Vue源码学习笔记(一)"><meta property="og:url" content="http://blog.leospace.cn/archives/2684979a.html"><meta property="og:site_name" content="LeaveH"><meta property="og:description" content="mustache模板引擎。"><meta property="og:image" content="http://blog.leospace.cn/images/vue_cover.png"><meta property="article:published_time" content="2021-07-31T02:30:11.000Z"><meta property="article:modified_time" content="2021-08-02T09:45:22.451Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="next" title="TypeScript学习笔记" href="http://blog.leospace.cn/archives/4a9ed04d.html"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},bookmark:{message_prev:"按",message_next:"键将本页加入书签"},runtime_unit:"天",runtime:!1,copyright:void 0,ClickShowText:void 0,medium_zoom:!1,fancybox:!0,Snackbar:void 0,justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js",css:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css"},baiduPush:!1,highlightCopy:!0,highlightLang:!0,isPhotoFigcaption:!1,islazyload:!0,isanchor:!1}</script><script>var GLOBAL_CONFIG_SITE={isPost:!0,isHome:!1,isHighlightShrink:!1,isSidebar:!0}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}</style></noscript><link rel="stylesheet" href="/css/background.css"><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="LeaveH" type="application/atom+xml"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://gitee.com/leaveHao/Picturebed/raw/master/common/Leo_Avatar.jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">6</div></a></div></div><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">5</div></a></div></div><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">3</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#mustache模板引擎"><span class="toc-number">1.</span> <span class="toc-text">mustache模板引擎</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#历史上曾经出现的数据变为视图的方法"><span class="toc-number">2.</span> <span class="toc-text">历史上曾经出现的数据变为视图的方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#纯DOM法"><span class="toc-number">2.1.</span> <span class="toc-text">纯DOM法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数组join法"><span class="toc-number">2.2.</span> <span class="toc-text">数组join法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ES6的反引号法"><span class="toc-number">2.3.</span> <span class="toc-text">ES6的反引号法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mustache-模板语法基本使用"><span class="toc-number">3.</span> <span class="toc-text">mustache 模板语法基本使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#正则表达式实现简单模板数据填充"><span class="toc-number">4.</span> <span class="toc-text">正则表达式实现简单模板数据填充</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mustache-库的机理"><span class="toc-number">5.</span> <span class="toc-text">mustache 库的机理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#什么是tokens"><span class="toc-number">5.1.</span> <span class="toc-text">什么是tokens?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mustache-底层做的两件事"><span class="toc-number">5.2.</span> <span class="toc-text">mustache 底层做的两件事</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#手写实现-mustache"><span class="toc-number">6.</span> <span class="toc-text">手写实现 mustache</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#环境配置"><span class="toc-number">6.1.</span> <span class="toc-text">环境配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#手写实现-Scanner-类"><span class="toc-number">6.2.</span> <span class="toc-text">手写实现 Scanner 类</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/images/default_cover.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">LeaveH</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">Vue源码学习笔记(一)</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2021-07-31 10:30:11"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2021-07-31</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2021-08-02 17:45:22"><i class="fas fa-history fa-fw"></i> 更新于 2021-08-02</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/JavaScript/">JavaScript</a></span></div><div class="meta-secondline"></div><div class="meta-thirdline"><span class="post-meta-pv-cv"></span><span class="post-meta-commentcount"></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h2 id="mustache模板引擎"><a href="#mustache模板引擎" class="headerlink" title="mustache模板引擎"></a><code>mustache</code>模板引擎</h2><blockquote><p>什么是模板引擎?<br>模板引擎是将数据变为视图最优雅的解决方案。</p></blockquote><h2 id="历史上曾经出现的数据变为视图的方法"><a href="#历史上曾经出现的数据变为视图的方法" class="headerlink" title="历史上曾经出现的数据变为视图的方法"></a>历史上曾经出现的数据变为视图的方法</h2><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">//数据 data</span></span><br><span class="line">[</span><br><span class="line">  &#123; <span class="attr">"name"</span>: <span class="string">"小明"</span>, <span class="attr">"age"</span>: <span class="number">12</span>, <span class="attr">"sex"</span>: <span class="string">"男"</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">"name"</span>: <span class="string">"小红"</span>, <span class="attr">"age"</span>: <span class="number">11</span>, <span class="attr">"sex"</span>: <span class="string">"女"</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">"name"</span>: <span class="string">"小强"</span>, <span class="attr">"age"</span>: <span class="number">13</span>, <span class="attr">"sex"</span>: <span class="string">"男"</span> &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 视图 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hd"</span>&gt;</span>小明的基本信息<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bd"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名:小明<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>年龄:12<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>性别:男<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hd"</span>&gt;</span>小红的基本信息<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bd"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名:小红<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>年龄:11<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>性别:女<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  …………</span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="纯DOM法"><a href="#纯DOM法" class="headerlink" title="纯DOM法"></a>纯<code>DOM</code>法</h3><p>非常笨拙，没有实战价值</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"list"</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> list = <span class="built_in">document</span>.getElementById(<span class="string">'list'</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.length; i++) &#123;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">//每遍历一项,都要用DOM方法去创建li标签</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> oLi = <span class="built_in">document</span>.createElement(<span class="string">'li'</span>);</span></span><br><span class="line"><span class="actionscript">    <span class="comment">//创建hd这个div</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> hdDiv = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span></span><br><span class="line"><span class="actionscript">    hdDiv.className = <span class="string">'hd'</span>;</span></span><br><span class="line"><span class="actionscript">    hdDiv.innerText = data[i].name + <span class="string">'的基本信息'</span>;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">//创建bd这个div</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> bdDiv = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span></span><br><span class="line"><span class="actionscript">    bdDiv.className = <span class="string">'bd'</span>;</span></span><br><span class="line"><span class="actionscript">    <span class="comment">//创建三个p</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> p1 = <span class="built_in">document</span>.createElement(<span class="string">'p'</span>);</span></span><br><span class="line"><span class="actionscript">    p1.innerText = <span class="string">'姓名:'</span> + data[i].name;</span></span><br><span class="line">    bdDiv.appendChild(p1);</span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> p2 = <span class="built_in">document</span>.createElement(<span class="string">'p'</span>);</span></span><br><span class="line"><span class="actionscript">    p2.innerText = <span class="string">'年龄:'</span> + data[i].age;</span></span><br><span class="line">    bdDiv.appendChild(p2);</span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> p3 = <span class="built_in">document</span>.createElement(<span class="string">'p'</span>);</span></span><br><span class="line"><span class="actionscript">    p3.innerText = <span class="string">'性别:'</span> + data[i].sex;</span></span><br><span class="line">    bdDiv.appendChild(p3);</span><br><span class="line">    oLi.appendChild(hdDiv);</span><br><span class="line">    oLi.appendChild(bdDiv);</span><br><span class="line">    list.appendChild(oLi);</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="数组join法"><a href="#数组join法" class="headerlink" title="数组join法"></a>数组<code>join</code>法</h3><p>曾几何时非常流行，是曾经的前端必会知识</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"list"</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> list = <span class="built_in">document</span>.getElementById(<span class="string">'list'</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.length; i++) &#123;</span></span><br><span class="line">    list.innerHTML += [</span><br><span class="line"><span class="actionscript">      <span class="string">'&lt;li&gt;'</span>,</span></span><br><span class="line"><span class="handlebars"><span class="xml">      '  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"hd"</span>&gt;</span>' + data[i].name + '的基本信息<span class="tag">&lt;/<span class="name">div</span>&gt;</span>',</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">      '  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bd"</span>&gt;</span>',</span></span></span><br><span class="line"><span class="actionscript">      <span class="string">'    &lt;p&gt;姓名:'</span> + data[i].name + <span class="string">'&lt;/p&gt;'</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="string">'    &lt;p&gt;年龄:'</span> + data[i].age + <span class="string">'&lt;/p&gt;'</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="string">'    &lt;p&gt;性别:'</span> + data[i].sex + <span class="string">'&lt;/p&gt;'</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="string">'  &lt;/div&gt;'</span>,</span></span><br><span class="line"><span class="actionscript">      <span class="string">'&lt;/li&gt;'</span>,</span></span><br><span class="line"><span class="actionscript">    ].join(<span class="string">''</span>);</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="handlebars"><span class="xml"><span class="tag">&lt;/&gt;</span></span></span></span><br></pre></td></tr></table></figure><h3 id="ES6的反引号法"><a href="#ES6的反引号法" class="headerlink" title="ES6的反引号法"></a><code>ES6</code>的反引号法</h3><p><code>ES6</code> 中新增的<code>`${a}`</code>语法糖，很好用</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"list"</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 引入mustache库--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./mustache.js"</span>&gt;</span></span><br><span class="line"><span class="handlebars"><span class="xml">  <span class="tag">&lt;/&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> list = <span class="built_in">document</span>.getElementById(<span class="string">'list'</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.length; i++) &#123;</span></span><br><span class="line">      list.innerHTML += `</span><br><span class="line"><span class="handlebars"><span class="xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span></span><br><span class="line"><span class="javascript">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"hd"</span>&gt;$&#123;data[i].name&#125;的基本信息&lt;<span class="regexp">/div&gt;</span></span></span><br><span class="line"><span class="javascript">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"bd"</span>&gt;</span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名:$&#123;data[i].name&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>年龄:$&#123;data[i].age&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>性别:$&#123;data[i].sex&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">         <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span></span><br><span class="line">      `;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="mustache-模板语法基本使用"><a href="#mustache-模板语法基本使用" class="headerlink" title="mustache 模板语法基本使用"></a>mustache 模板语法基本使用</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"container"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 引入mustache库--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./mustache.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> templateStr = <span class="string">`</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>今天是</span><span class="template-variable">&#123;&#123;weather&#125;&#125;</span><span class="xml">,我去</span><span class="template-variable">&#123;&#123;toDo&#125;&#125;</span><span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名:</span><span class="template-variable">&#123;&#123;info.name&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>年龄:</span><span class="template-variable">&#123;&#123;info.age&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>爱好:</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">          </span><span class="template-tag">&#123;&#123;#<span class="name">info</span>.hobbies&#125;&#125;</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><span class="template-variable">&#123;&#123;.&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">          </span><span class="template-tag">&#123;&#123;/<span class="name">info</span>.hobbies&#125;&#125;</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span></span><br><span class="line">          教育经历:</span><br><span class="line"><span class="handlebars"><span class="xml">          </span><span class="template-tag">&#123;&#123;#<span class="name">info</span>.experience&#125;&#125;</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><span class="template-variable">&#123;&#123;time&#125;&#125;</span><span class="xml">---</span><span class="template-variable">&#123;&#123;thing&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">          </span><span class="template-tag">&#123;&#123;/<span class="name">info</span>.experience&#125;&#125;</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line">    `;</span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> data = &#123;</span></span><br><span class="line"><span class="actionscript">    weather: <span class="string">'晴天'</span>,</span></span><br><span class="line"><span class="actionscript">    toDo: <span class="string">'卖水果'</span>,</span></span><br><span class="line">    info: &#123;</span><br><span class="line"><span class="actionscript">      name: <span class="string">'Leo'</span>,</span></span><br><span class="line">      age: 18,</span><br><span class="line"><span class="actionscript">      hobbies: [<span class="string">'打篮球'</span>, <span class="string">'游泳'</span>, <span class="string">'绘画'</span>],</span></span><br><span class="line">      experience: [</span><br><span class="line"><span class="actionscript">        &#123; time: <span class="number">2004</span>, thing: <span class="string">'上小学'</span> &#125;,</span></span><br><span class="line"><span class="actionscript">        &#123; time: <span class="number">2010</span>, thing: <span class="string">'上初中'</span> &#125;,</span></span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> domStr = Mustache.render(templateStr, data);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> container = <span class="built_in">document</span>.getElementById(<span class="string">'container'</span>);</span></span><br><span class="line">  container.innerHTML = domStr;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 在模板字符串没出现之前,通过script标签编写 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 这里type中可以随意输入 type="qaq" --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/template"</span> <span class="attr">id</span>=<span class="string">"myTemple"</span>&gt;</span></span><br><span class="line"><span class="handlebars"><span class="xml">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>今天是</span><span class="template-variable">&#123;&#123;weather&#125;&#125;</span><span class="xml">,我去</span><span class="template-variable">&#123;&#123;toDo&#125;&#125;</span><span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名:</span><span class="template-variable">&#123;&#123;info.name&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>年龄:</span><span class="template-variable">&#123;&#123;info.age&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>爱好:</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">      </span><span class="template-tag">&#123;&#123;#<span class="name">info</span>.hobbies&#125;&#125;</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">        <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><span class="template-variable">&#123;&#123;.&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">      </span><span class="template-tag">&#123;&#123;/<span class="name">info</span>.hobbies&#125;&#125;</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span></span><br><span class="line">      教育经历:</span><br><span class="line"><span class="handlebars"><span class="xml">      </span><span class="template-tag">&#123;&#123;#<span class="name">info</span>.experience&#125;&#125;</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">        <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><span class="template-variable">&#123;&#123;time&#125;&#125;</span><span class="xml">---</span><span class="template-variable">&#123;&#123;thing&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">      </span><span class="template-tag">&#123;&#123;/<span class="name">info</span>.experience&#125;&#125;</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> data = &#123;</span></span><br><span class="line"><span class="actionscript">    weather: <span class="string">'晴天'</span>,</span></span><br><span class="line"><span class="actionscript">    toDo: <span class="string">'卖水果'</span>,</span></span><br><span class="line">    info: &#123;</span><br><span class="line"><span class="actionscript">      name: <span class="string">'Leo'</span>,</span></span><br><span class="line">      age: 18,</span><br><span class="line"><span class="actionscript">      hobbies: [<span class="string">'打篮球'</span>, <span class="string">'游泳'</span>, <span class="string">'绘画'</span>],</span></span><br><span class="line">      experience: [</span><br><span class="line"><span class="actionscript">        &#123; time: <span class="number">2004</span>, thing: <span class="string">'上小学'</span> &#125;,</span></span><br><span class="line"><span class="actionscript">        &#123; time: <span class="number">2010</span>, thing: <span class="string">'上初中'</span> &#125;,</span></span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"><span class="actionscript">  <span class="comment">//这里通过ID获取script标签中的模板字符</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> templateStr = <span class="built_in">document</span>.getElementById(<span class="string">'myTemple'</span>).innerHTML;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> domStr = Mustache.render(templateStr, data);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> container = <span class="built_in">document</span>.getElementById(<span class="string">'container'</span>);</span></span><br><span class="line">  container.innerHTML = domStr;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="正则表达式实现简单模板数据填充"><a href="#正则表达式实现简单模板数据填充" class="headerlink" title="正则表达式实现简单模板数据填充"></a>正则表达式实现简单模板数据填充</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> templateStr = <span class="string">'&lt;p&gt;今天是&#123;&#123;weather&#125;&#125;,我去&#123;&#123;toDo&#125;&#125;&lt;p&gt;'</span>;</span><br><span class="line"><span class="keyword">let</span> data = &#123;</span><br><span class="line">  weather: <span class="string">'晴天'</span>,</span><br><span class="line">  toDo: <span class="string">'打篮球'</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">template, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> template.replace(<span class="regexp">/\&#123;\&#123;(\w+)\&#125;\&#125;/g</span>, (str, $<span class="number">1</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> data[$<span class="number">1</span>];</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(render(templateStr, data)); <span class="comment">//&lt;p&gt;今天是晴天,我去打篮球&lt;p&gt;</span></span><br></pre></td></tr></table></figure><h2 id="mustache-库的机理"><a href="#mustache-库的机理" class="headerlink" title="mustache 库的机理"></a>mustache 库的机理</h2><p>模板字符串– <code>编译</code> –&gt; tokens – <code>解析</code> –&gt; <span style="color:#87ceeb">dom 字符串</span> &lt;– <code>结合</code> –数据</p><h3 id="什么是tokens"><a href="#什么是tokens" class="headerlink" title="什么是tokens?"></a>什么是<code>tokens</code>?</h3><ul><li>tokens 是一个 JS 的嵌套数组,是模板字符串的 JS 表示。</li><li>它是“抽象语法树”、“虚拟节点”等等的开山鼻祖。</li></ul><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">//模板字符串</span></span><br><span class="line">&lt;p&gt;今天是&#123;&#123;weather&#125;&#125;,我去&#123;&#123;toDo&#125;&#125;。&lt;p&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//tokens,是一个嵌套数组,每一项都是一个token</span></span><br><span class="line">[</span><br><span class="line">  [<span class="string">"text"</span>,<span class="string">"&lt;p&gt;今天是"</span>], <span class="comment">//token</span></span><br><span class="line">  [<span class="string">"name"</span>,<span class="string">"weather"</span>], <span class="comment">//token</span></span><br><span class="line">  [<span class="string">"text"</span>,<span class="string">",我去"</span>], <span class="comment">//token</span></span><br><span class="line">  [<span class="string">"name"</span>,<span class="string">"toDo"</span>], <span class="comment">//token</span></span><br><span class="line">  [<span class="string">"text"</span>,<span class="string">"。&lt;p&gt;"</span>] <span class="comment">//token</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>当模板字符串中有循环存在时,它将被编译为嵌套更深的 tokens</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">//模板字符串</span></span><br><span class="line">&lt;div&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &#123;&#123;#list&#125;&#125;</span><br><span class="line">    &lt;li&gt;&#123;&#123;.&#125;&#125;&lt;/li&gt;</span><br><span class="line">    &#123;&#123;/list&#125;&#125;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//tokens</span></span><br><span class="line">[</span><br><span class="line">  [<span class="string">"text"</span>,<span class="string">"&lt;div&gt;&lt;ul&gt;"</span>],</span><br><span class="line">  [<span class="string">"#"</span>,<span class="string">"list"</span>,[</span><br><span class="line">    [<span class="string">"text"</span>,<span class="string">"&lt;li&gt;"</span>],</span><br><span class="line">    [<span class="string">"name"</span>,<span class="string">"."</span>],</span><br><span class="line">    [<span class="string">"text"</span>,<span class="string">"&lt;/li&gt;"</span>]</span><br><span class="line">  ]],</span><br><span class="line">  [<span class="string">"text"</span>,<span class="string">"&lt;/ul&gt;&lt;/div&gt;"</span>]</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="mustache-底层做的两件事"><a href="#mustache-底层做的两件事" class="headerlink" title="mustache 底层做的两件事"></a>mustache 底层做的两件事</h3><ul><li>将模板字符串编译为<code>tokens</code>形式。</li><li>将<code>tokens</code>结合数据，解析为<code>dom</code>字符串。</li></ul><h2 id="手写实现-mustache"><a href="#手写实现-mustache" class="headerlink" title="手写实现 mustache"></a>手写实现 mustache</h2><h3 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h3><ol><li>初始化项目<br><code>npm init</code></li><li>安装 webpack<br><code>npm i webpack@4.44.2 webpack-cli@3.3.12 webpack-dev-server@3.11.0</code></li><li>创建 webpack.config.js 文件配置 webpack</li></ol><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//模式 开发</span></span><br><span class="line">  mode: <span class="string">'development'</span>,</span><br><span class="line">  <span class="comment">//入口</span></span><br><span class="line">  entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">  <span class="comment">//出口</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'bundle.js'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//配置webpack-dev-server</span></span><br><span class="line">  devServer: &#123;</span><br><span class="line">    <span class="comment">//静态文件根目录</span></span><br><span class="line">    contentBase: path.join(__dirname, <span class="string">'www'</span>),</span><br><span class="line">    <span class="comment">//不压缩</span></span><br><span class="line">    compress: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">//端口号</span></span><br><span class="line">    port: <span class="number">8080</span>,</span><br><span class="line">    <span class="comment">//虚拟打包路径,bundle.js文件没有真正生成</span></span><br><span class="line">    publicPath: <span class="string">'/fictitious/'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ol start="4"><li>将 webpack-dev-server 配置到脚本命令，然后运行<br><code>npm run dev</code></li></ol><h3 id="手写实现-Scanner-类"><a href="#手写实现-Scanner-类" class="headerlink" title="手写实现 Scanner 类"></a>手写实现 Scanner 类</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//scanner.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Scanner</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(templateStr) &#123;</span><br><span class="line">    <span class="keyword">this</span>.templateStr = templateStr;</span><br><span class="line">    <span class="keyword">this</span>.pos = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">this</span>.tail = templateStr;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//功能弱,走过指定内容,没有返回值</span></span><br><span class="line">  scan(tag) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.tail.indexOf(tag) != <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">//tag有多长,比如&#123;&#123;长度是2,就让指针后移多少位</span></span><br><span class="line">    <span class="keyword">this</span>.pos += tag.length;</span><br><span class="line">    <span class="keyword">this</span>.tail = <span class="keyword">this</span>.templateStr.substring(<span class="keyword">this</span>.pos);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//让指针进行扫描,直到遇见指定内容结束,并且能够返回结束之前路过的文字</span></span><br><span class="line">  scanUntil(stopTag) &#123;</span><br><span class="line">    <span class="keyword">const</span> pos_backup = <span class="keyword">this</span>.pos;</span><br><span class="line">    <span class="comment">//当尾巴的开头不是stopTag的时候,就说明还没有扫描到stopTag</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">this</span>.eos() &amp;&amp; <span class="keyword">this</span>.tail.indexOf(stopTag) != <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.pos++;</span><br><span class="line">      <span class="comment">//改变尾巴为从当前指针这个字符开始,到最后的全部字符</span></span><br><span class="line">      <span class="keyword">this</span>.tail = <span class="keyword">this</span>.templateStr.substring(<span class="keyword">this</span>.pos);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.templateStr.substring(pos_backup, <span class="keyword">this</span>.pos) || <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//指针是否已经到头,返回布尔值</span></span><br><span class="line">  eos() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.pos &lt; <span class="keyword">this</span>.templateStr.length;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="keyword">import</span> Scanner <span class="keyword">from</span> <span class="string">'./scanner'</span>;</span><br><span class="line"><span class="built_in">window</span>.LEO_TemplateEngine = &#123;</span><br><span class="line">  render(templateStr, data) &#123;</span><br><span class="line">    <span class="comment">//测试一下扫描器功能:实例化一个扫描器,构造时候提供一个参数,这个参数就是模板字符串</span></span><br><span class="line">    <span class="comment">//也就是说这个扫描器就是针对这个模板字符串工作的</span></span><br><span class="line">    <span class="keyword">let</span> scanner = <span class="keyword">new</span> Scanner(templateStr);</span><br><span class="line">    <span class="keyword">while</span> (scanner.eos()) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(scanner.scanUntil(<span class="string">'&#123;&#123;'</span>));</span><br><span class="line">      scanner.scan(<span class="string">'&#123;&#123;'</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(scanner.scanUntil(<span class="string">'&#125;&#125;'</span>));</span><br><span class="line">      scanner.scan(<span class="string">'&#125;&#125;'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//依次输出:</span></span><br><span class="line">    <span class="comment">// &lt;p&gt;今天是</span></span><br><span class="line">    <span class="comment">// weather</span></span><br><span class="line">    <span class="comment">// ,我去</span></span><br><span class="line">    <span class="comment">// toDo</span></span><br><span class="line">    <span class="comment">// 。&lt;p&gt;</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined" rel="external nofollow noreferrer">LeaveHao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://blog.leospace.cn/archives/2684979a.html">http://blog.leospace.cn/archives/2684979a.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://blog.leospace.cn" target="_blank">LeaveH</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF/">前端</a><a class="post-meta__tags" href="/tags/Vue/">Vue</a></div><div class="post_share"><div class="social-share" data-image="/images/vue_cover.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/archives/4a9ed04d.html"><img class="next-cover" data-src="/images/typescript_cover.jpg" onerror='onerror=null,src="/img/404.jpg"'><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">TypeScript学习笔记</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/archives/f007732d.html" title="在Vue中使用NProgress"><img class="relatedPosts_cover" data-src="/images/vue_cover.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-01-26</div><div class="relatedPosts_title">在Vue中使用NProgress</div></div></a></div><div class="relatedPosts_item"><a href="/archives/cca6d4c.html" title="在Vue中通过动态插入标签的方式引入插件"><img class="relatedPosts_cover" data-src="/images/vue_cover.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-11-15</div><div class="relatedPosts_title">在Vue中通过动态插入标签的方式引入插件</div></div></a></div><div class="relatedPosts_item"><a href="/archives/81488588.html" title="JS使用定时器实现长按事件"><img class="relatedPosts_cover" data-src="/images/javascript_cover.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-11-04</div><div class="relatedPosts_title">JS使用定时器实现长按事件</div></div></a></div><div class="relatedPosts_item"><a href="/archives/4a9ed04d.html" title="TypeScript学习笔记"><img class="relatedPosts_cover" data-src="/images/typescript_cover.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-07-30</div><div class="relatedPosts_title">TypeScript学习笔记</div></div></a></div><div class="relatedPosts_item"><a href="/archives/16107.html" title="AngularJS学习笔记"><img class="relatedPosts_cover" data-src="/images/angularjs_cover.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-06-09</div><div class="relatedPosts_title">AngularJS学习笔记</div></div></a></div></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By LeaveHao</div><div class="footer_custom_text">鄂ICP备20004285号</div><div class="icp"><a href="http://www.beian.miit.gov.cn/" rel="external nofollow noreferrer"><img class="icp-icon" src="/images/beian.png"><span>鄂公网安备 42050202000507号</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" title="缩小字体"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="简繁转换">繁</button><button id="darkmode" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script defer id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zindex="-1" mobile="false" data-click="true"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script></body></html><!-- rebuild by neat -->